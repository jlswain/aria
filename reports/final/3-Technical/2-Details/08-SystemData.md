### System Data {#sec-3-2-8-1}

Aria is a machine learning smart home and must be able to process and analyze the data it collects
to produce actions for the end user. In order to accomplish this, data must be collected, organized,
and stored in a way which can later be presented to an algorithm as input. This section will outline
the different types of information being collected by our system and the importance of this 
information.

##### Devices {-}

Devices are the backbone of any home automation system, as they are the objects being controlled.
Different devices such as a light bulb, thermostat, or motion sensor all fill a different role in a
home automation system. There needs to be a common way to store information about these devices to
enable them to be displayed and controlled through an interactive user interface. Information about
how to send messages to devices, what capabilities they have, and about their current state is all
important. Once devices are able to be represented, a record of their state changes and factors 
leading to those state changes must be captured. An example of the structure of a device is shown
below.

```
{  
   "ZWaveDevice__valueMap":{  
      "Bright":null,
      "Color":null,
      "Color Index":null,
      "Dim":null,
      "Level":null
   },
   "address":"44875ab6-ae93-4094-8ff7-5fdf01757f30",
   "deviceType":{  
      "attributes":[  
         {  
            "isControllable":true,
            "name":"Bright",
            "parameters":[  
               {  
                  "dataType":"binary",
                  "max":0,
                  "min":0,
                  "name":"Bright",
                  "step":null,
                  "value":false
               }
            ]
         },
      ],
      "maker":"Aeotec",
      "name":"ZW098 LED Bulb",
      "protocol":"zwave"
   },
   "name":"ZW098 LED Bulb",
   "version":"4"
}																
```
##### Device State Changes {-} 

Depending on the type of device, a state change can mean many different things. Some devices will
have autonomous state changes, such as a motion sensor suddenly detecting motion, while a light bulb 
will only have a state change if the user explicitly turns it on or off. Our system needs a way to 
differentiate between events generated by a device automatically and user requests to change a 
device's state. The system also needs to be able to recognize when an event is directly caused by
a user request, and when it is generated by a device. When a state change occurs, the specific 
information about what value changed on what device must be remembered. Because the Aria system 
includes a machine learning component, there also needs to be a differentiation between state 
changes caused by the user and state changes caused by a learned behaviour of the system. An example
of a generated event is shown below.

```
{  
   type:3,
   data:{  
      "attribute":{  
         "isControllable":true,
         "name":"volume",
         "parameters":[  
            {  
               "dataType":"int",
               "max":100,
               "min":0,
               "name":"volume",
               "step":null,
               "value":"56"
            }
         ]
      },
      "device":"Media Room",
      "deviceType":"Sonos PLAY:1",
      "event":"device.event",
      "timestamp":1487799897478
   },
   sender:35434141-4644   -4335-3139   -414530313430,
   receiver:00000000-0000   -0000-0000   -000000000000
}
```

##### Learning {-}

The user is responsible for training the Aria system to learn any specific desired functionality.
They must create the behaviour they want the system to learn, and populate that behaviour with
training sessions. There needs to be the capability to then associate any device events and requests
with an ongoing training session, and to associate that training session to the correct behaviour.
The relationships between user generated state changes, device generated events, and the connection
between these and training sessions must be preserved in a such a way that it can be used as input 
to a machine learning algorithm to estimate intended behaviour.

##### Summary {-}

In order to maximize the usefulness of data captured, the events and relationships of the data must
be persisted. Persisting these relationships will allow for significantly more meaningful input to
the machine learning, and will allow the data to exist across restarts of the system. The ability to
persist information in a structured manner and to preserve relationships in the information being 
stored form the criteria used when evaluating different options for persistence.